#*
 *   $Id$
 * 
 *   Copyright 2006 University of Dundee. All rights reserved.
 *   Use is subject to license terms supplied in LICENSE.txt
 * 
 *#
/*
 *   $$Id$$
 * 
 *   Copyright 2006 University of Dundee. All rights reserved.
 *   Use is subject to license terms supplied in LICENSE.txt
 * 
 */

//
// ObjectFactory registrar generated by templates/java_objs_reg.vm
//

package omero.util;

public abstract class ObjectFactoryRegistrar {

  public static class Instance extends Ice.LocalObjectImpl implements Ice.ObjectFactory {

    public Ice.Object create(String type) {
      return ObjectFactoryRegistrar.create(type);
    }

    public void destroy() {
      // does nothing.
    }

  }
    
  public final static Instance INSTANCE = new Instance();

  public static void conditionalAdd(String name, Ice.Communicator ic, Ice.ObjectFactory _factory) {

    if (null==ic.findObjectFactory(name)) {
      ic.addObjectFactory(_factory, name);
    }

  }

  /**
   *
   */
  public static void registerObjectFactory(Ice.Communicator ic, Ice.ObjectFactory _factory) {
    conditionalAdd("::omero::model::Permissions", ic, _factory);
#foreach($pojo in $c2j.getPOJOIterator( $cfg.getClassMappings() ))
#if(!$pojo.classModifiers.contains("abstract"))
    conditionalAdd("::omero::model::${pojo.declarationName}", ic,  _factory);
#end
#foreach($property in $pojo.allPropertiesIterator)
#if($c2j.isComponent($property))
#set($component = $c2j.getPOJOClass($property.getValue()))
#if(!$pojo.classModifiers.contains("abstract"))
    conditionalAdd("::omero::model::${component.declarationName}", ic, _factory);
#end
#end
#end
#end
  }

  /**
   *
   */
  public static Ice.Object create(String type) {
    if (null==type) {
      throw new IllegalArgumentException("Type argument is required.");
    } else if (type.equals("::omero::model::Permissions")) {
        return new omero.model.PermissionsI();  
#foreach($pojo in $c2j.getPOJOIterator( $cfg.getClassMappings() ))
#if(!$pojo.classModifiers.contains("abstract"))
    } else if (type.equals("::omero::model::${pojo.declarationName}")) {
      return new omero.model.${pojo.declarationName}I();
#end
#foreach($property in $pojo.allPropertiesIterator)
#if($c2j.isComponent($property))
#set($component = $c2j.getPOJOClass($property.getValue()))
#if(!$component.classModifiers.contains("abstract"))
    } else if (type.equals("::omero::model::${component.declarationName}")) {
      return new omero.model.${component.declarationName}I();
#end
#end
#end
#end
    } else {
      throw new IllegalArgumentException(type + " is an unknown type.");
    }
  }

}

#stop
